
<!DOCTYPE html>
<html lang="ja">
<head>
	<!-- Primary Meta Tags -->
	<title>JSONクライアント-レベルメーター-MQTTPublish、ArduinoJson、逆シリアル化、データ解析</title>
	<meta name="description" content="レベルメータープロジェクト用のArduinoプラットフォーム、ESP866、ESP32上のJSONクライアント。 データの解析を可能にし、MQTTサービスに公開IoT Industries Slovakia">
	<meta name="keywords" content="json、arduino、ethernet、wifi、esp8266、esp32、parsing、arduinojson、deserialization、mqtt、publish、subscribe、data、transmission、http、mqtts、encrypted、socket、iot、industries、slovakia、Level、water、waterwell、level、モニター、リットル">
	<meta name="news_keywords" content="json、arduino、ethernet、wifi、esp8266、esp32、parsing、arduinojson、deserialization、mqtt、publish、subscribe、data、transmission、http、mqtts、encrypted、socket、iot、industries、slovakia、Level、water、waterwell、level、モニター、リットル">	
<!-- Open Graph / Facebook -->
	<meta name="robots" content="index, follow">
	<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml" />
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>    
	<style>
		table, th, td {
  			border: 1px solid black;
		}
	</style>
</head>
<body>
	<div class="container">
  		<div class="row">
    			<div class="col-sm-12">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li><a href="index.html">レベルメーター</a></li>
	<!---<li><a href="zrazkomer.html">Zrážkomer</a></li>-->
	<li><a href="zapojenie.html">関与</a></li>   
	<li class="active"><a href="json_client.html">JSONクライアント</a></li>   
	<li><a href="../Instructions/Waterwell monitor - instructions.pdf">インストール</a></li>
	    <a href="../json_client.html"><img src="https://futbalovysen.sk/wp-content/uploads/slovakia.png" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
	<a href="../en/json_client.html"><img src="https://i2.wp.com/facsusa.com/wp-content/uploads/2017/05/Flag-of-England.png?ssl=1" alt="English.png, 2,2kB" title="English" height="32" width="32"></a>
<a href="../fr/json_client.html"><img src="https://i.imgur.com/vX7NaZ7.png" alt="French.png, 2,2kB" title="French" height="32" width="32"></a> 
<a href="../th/json_client.html"><img src="https://i.imgur.com/iwaTzpm.png" alt="Thai.png, 2,2kB" title="Thai" height="32" width="32"></a>
<a href="../et/json_client.html"><img src="https://i.imgur.com/1qxI0wk.png" alt="Estonian.png, 2,2kB" title="Estonian" height="32" width="32"></a>
<a href="../da/json_client.html"><img src="https://i.imgur.com/BOi815w.png" alt="Danish.png, 2,2kB" title="Danish" height="32" width="32"></a>
<a href="../pl/json_client.html"><img src="https://i.imgur.com/OteBe4t.png" alt="Polish.png, 2,2kB" title="Polish" height="32" width="32"></a>
<a href="../ru/json_client.html"><img src="https://i.imgur.com/3R5jVrX.png" alt="Russian.png, 2,2kB" title="Russian" height="32" width="32"></a>
</ul>
  </div>
</nav>  
<div class="alert alert-success">
					<strong>JSONクライアントのソースコードを含むプロジェクトレベルのメーターリポジトリ-Github: </strong><a href="https://github.com/martinius96/hladinomer-studna-scripty/">レベルメーター</a>
				</div>	
<span class="label label-default">Arduino</span>
<span class="label label-primary">Ethernet</span>
<span class="label label-success">Wiznet W5100 / W5500</span>
<span class="label label-info">ESP8266</span>
<span class="label label-warning">ESP32</span>
<span class="label label-danger">超音波</span>
<span class="label label-default">HC-SR04</span>
<span class="label label-primary">JSN-SR04T</span>
<span class="label label-info">Sigfox</span>	
<span class="label label-warning">JSON</span>
<span class="label label-danger">MQTT</span>
<div class="row">
  <div class="col-sm-3"><center><img src="https://i.imgur.com/X946pmi.png" width="128px" height="128px" style="border-radius: 50%;" alt="JSON DATA" title="JSON DATA"><br><b>JSON DATA</b></center></div>
  <div class="col-sm-3"><center><img src="https://i.imgur.com/B2xdel0.png" width="128px" height="128px" alt="ArduinoJSON" title="ArduinoJSON"><br><b>ArduinoJSON</b></center></div>
  <div class="col-sm-3"><center><img src="https://i.imgur.com/oXhOEZi.png" width="128px" height="128px" style="border-radius: 50%;" alt="MQTT" title="MQTT"><br><b>MQTT</b></center></div>
  <div class="col-sm-3"><center><img src="https://i.imgur.com/WWpufkP.png" width="128px" height="128px" style="border-radius: 50%;" alt="HTTP" title="HTTP"><br><b>HTTP</b></center></div>
</div>	
<hr><center><h2>JSONクライアント-レベルメーター</h2></center><hr>
<p style="text-align: justify;">
Arduinoプラットフォームで構築されたJSONクライアント、ESP8266、ESP32は、WebSocketを介したWebサーバー（Webインターフェイスレベルメーター）への接続を可能にします。
<b>クライアントは60秒ごとに循環HTTPGETリクエストを行い、<a href="http://arduino.clanweb.eu/studna_s_prekladom/json_output.php"> /json_output.php </a>のコンテンツを取得します。 、ここで、Webサーバーは現在設定されている深さと井戸の直径に基づいて水位（センチメートル単位）、井戸の体積（リットル単位）でJSONデータを配布します。</ b>
ロードされたJSONペイロードは、HTTP応答からJSONクライアントを解析し、この文字列を逆シリアル化できます。
デシリアライズ後、値が割り当てられている個々のキーにアクセスして、それらを取得->解析することができます。
一致したデータはUART-シリアルライン-115200ボー/秒に書き込まれます。
JSONクライアントの既存のソースコードに追加できるユーザーアプリケーションでは、これらの値に基づいてエンティティを制御できます。たとえば、特定の水位に達した後の自動灌漑、揚水、ポンプ始動、最愛の人。
<b> MQTTまたはMQTTS（暗号化されたMQTT）としてマークされたファームウェアの一部は、送信機能を備えた拡張JSONクライアントです-MQTT Broker IoT IndustriesSlovakiaにデータを公開します-開発者向けに設計されたスロバキアの無料MQTTBroker。</ b>
MQTTとMQTTSの両方のバリアントは、JSONペイロードを取得するためのHTTPリクエストにも使用されるソケットを使用します。
既存のMQTTサーバーは、ソースコード内で自分のものに置き換えることができるため、ホームオートメーションシステム（Hassio、Mosquitto MQTT、Domoticz、Loxoneなど）でレベルメーターからのデータを利用できるようにすることもできます。
現在のソフトウェア実装では、マイクロコントローラー（JSONクライアント）は取得したデータをトピックレベルメーターのMQTTブローカーに送信しますが、個々の温度はサブトピックで区別されます。
</p> 
<div class="alert alert-success">
	<strong>JSONクライアントのサンプルプログラム実装: </strong><a href="https://github.com/martinius96/hladinomer-studna-scripty/tree/master/examples/JSON_Hladinomer">ここ</a>
</div>
<hr><center><h4>マイクロコントローラーで利用可能なライブラリ（Arduino / ESP）-JSONクライアント</h4></center><hr>
<div class="alert alert-danger">
	ライブラリアーカイブ（.zip）をに展開 <strong>C:/Users/[User]/Dokumenty/Arduino/libraries</strong>
</div>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th style="width: 25%">ライブラリの名前</th>
<th style="width: 50%">ライブラリ関数</th>
<th style="width: 25%">ダウンロード</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 25%"><b>PubSubClient</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
AVRマイクロコントローラー用ライブラリー（ATmega）Arduino Uno / Nano / Mega、ESP8266およびESP32。
MQTTプロトコルを介した通信が可能になり、MQTTブローカーとの暗号化された接続を実装することもできます。ESPマイクロコントローラーにはWiFiClientSecureクラスを使用する必要があります。
</p>
</td>
<td style="width: 25%"><a href="https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/martinius96/hladinomer-studna-scripty/tree/master/src/PubSubClient" class="btn btn-success" role="button">ダウンロード</a></td>
</tr>
<tr>
<td style="width: 25%"><b>ArduinoJson</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
AVRマイクロコントローラー用ライブラリー（ATmega）Arduino Uno / Nano / Mega、ESP8266およびESP32。
これにより、JSON構造の文字列を逆シリアル化でき、キーに割り当てられた値を解析できます。
</p>
</td>
<td style="width: 25%"><a href="https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/martinius96/hladinomer-studna-scripty/tree/master/src/ArduinoJson" class="btn btn-success" role="button">ダウンロード</a></td>
</tr>
</tbody>
</table>
	</div>
<div class="alert alert-info">
<strong> MQTTSの実装は、ESP8266、ESP32マイクロコントローラーで利用できます。</ strong>
ESP8266およびESP32は、MQTTサーバーへの暗号化された接続にルートCA証明書を使用します。 <b> MQTTサーバーの暗号化されたポートはデフォルトで8883であり、暗号化されていない1883です。</b>
特定のMQTTサーバー（ドメイン）のルートCA証明書を取得するには、OpenSSLツールを使用できます。これにより、問題の情報を簡単に取得して表示できます。
個々の証明書は、信頼の鎖の順序でリストされています。 ルートCAから中間へ。
<br> <b> MQTTサーバー（発行者）の証明書を発行したルートCA証明書を取得するコマンド：</b> <br>
<code>openssl s_client -showcerts -verify 5 -connect mqttserver.com:8883 < /dev/null</code>
</div>
<h4><font color="#C0392B">JSON形式のサンプルデータリスト（構造）</font></h4>
<div class="alert alert-danger">
	{<br>
		"value": 378,<br>
		"volume": 1900.04<br>
	}
</div>
<hr>
<h4>MQTT Brokerでの公開に使用されるトピックは次のとおりです。:</h4> 
<hr>
<li><b>hladinomer/objem</b> - リットル単位の井戸量</li>
<li><b>hladinomer/vyska</b> - センチメートル単位の現在の水位</li>
<hr>
<h4>Topic pre Subscribe:</h4>
<hr>
<li><b>hladinomer/#</b> - 下のすべてのサブトピックを削除します hladinomer/, したがって、体積、水位</li>
<p style="text-align: justify;">
<b> MQTTクライアントには、メイントピックレベルメーターとそのすべてのサブトピックへのサブスクライブされたサブスクリプションがあります。
同時に、情報がMQTTBrokerで正常に公開されたことを確認できます。情報はUARTに書き戻されます。</b>
<b><font color="red">警告：サンプル実装で使用されているMQTT Broker IoT Industries Slovakiaは公開されているため、データを変更、上書き、任意のユーザーが読み取ることができます!</font></b>
他のユーザーがJSONクライアントファームウェアを変更せずにマイクロコントローラーにアップロードした場合、事前定義されたトピックのデータは、あなたと彼によって上書きされます。
したがって、実際の実装中にデータが送信される別のトピックを選択することをお勧めします。
</p>
<hr>    
<h4>JSON PHP出力、解析、およびMQTTBrokerへのデータの公開:</h4>
<hr>
<center><img src="https://i.imgur.com/vZu48Mc.png" style="display: block; max-width: 100%; height: auto;" alt="JSON client (Arduino, ESP8266, ESP32) pre Hladiomer - UART výstup" title="JSON client (Arduino, ESP8266, ESP32) pre Hladiomer - UART výstup"></center>       		
<h4>HiveMQクライアント-サブスクライブトピック hladinomer/#</h4>
<center><img src="https://i.imgur.com/WS9gThO.png" style="display: block; max-width: 100%; height: auto;" alt="JSON client MQTT Broker IoT Industries Slovakia - výstup topicu - Subscribe termostat" title="JSON client MQTT Broker IoT Industries Slovakia - výstup topicu - Subscribe termostat"></center> 
					</div>
</div>
</div>
</body>
</html>
