<!DOCTYPE html>
<html lang="en-US">
<head>
	<!-- Primary Meta Tags -->
	<title>Water level monitor with ultrasonic measurement - Arduino / ESP8266 / ESP32 - IoT measurement using Sigfox</title>
	<meta name="description" content="Level meter built on the Arduino platform, ESP8266, ESP32. Measurement with ultrasonic sensor HC-SR04 / JSN-SR04T. Sending data via Ethernet, WiFi, Sigfox. Water level measurement in a well, sump.">
	<meta name="robots" content="index, follow">
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://martinius96.github.io/hladinomer-studna-scripty/en/">
	<meta property="og:title" content="Water level monitor with ultrasonic measurement - Arduino / ESP8266 / ESP32 - IoT measurement using Sigfox">
	<meta property="og:description" content="Level meter built on the Arduino platform, ESP8266, ESP32. Measurement with ultrasonic sensor HC-SR04 / JSN-SR04T. Sending data via Ethernet, WiFi, Sigfox. Water level measurement in a well, sump.">
	<meta property="og:image" content="">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://martinius96.github.io/hladinomer-studna-scripty/en/">
	<meta property="twitter:title" content="Water level monitor with ultrasonic measurement - Arduino / ESP8266 / ESP32 - IoT measurement using Sigfox">
	<meta property="twitter:description" content="Level meter built on the Arduino platform, ESP8266, ESP32. Measurement with ultrasonic sensor HC-SR04 / JSN-SR04T. Sending data via Ethernet, WiFi, Sigfox. Water level measurement in a well, sump.">
	<meta property="twitter:image" content="">
	
	<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../../sitemap.xml" />
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>    
</head>
<body>
	<div class="container">
  		<div class="row">
    			<div class="col-sm-12">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li class="active"><a href="index.html">Water Level monitor</a></li>
	<!---<li><a href="zrazkomer.html">Rainfall monitor</a></li>-->
	<li><a href="zapojenie.html">Wiring</a></li>      
<li><a href="json_client.html">JSON Client</a></li>    
      	<li><a href="kontakt.html">Contact</a></li>
	<li><a href="../Instructions/Waterwell monitor - instructions.pdf">Installation</a></li>
<li><a href="datasheet.html">Datasheets</a></li>
<a href="../index.html"><img src="https://futbalovysen.sk/wp-content/uploads/slovakia.png" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
<a href="../fr/index.html"><img src="https://i.imgur.com/vX7NaZ7.png" alt="French.png, 2,2kB" title="French" height="32" width="32"></a> 
<a href="../th/index.html"><img src="https://i.imgur.com/iwaTzpm.png" alt="Thai.png, 2,2kB" title="Thai" height="32" width="32"></a>  
<a href="../hi/index.html"><img src="https://i.imgur.com/vD6j3Ak.png" alt="Hindi.png, 2,2kB" title="Hindi" height="32" width="32"></a>  
<a href="../et/index.html"><img src="https://i.imgur.com/1qxI0wk.png" alt="Estonian.png, 2,2kB" title="Estonian" height="32" width="32"></a>
<a href="../da/index.html"><img src="https://i.imgur.com/BOi815w.png" alt="Danish.png, 2,2kB" title="Danish" height="32" width="32"></a>
 </ul>
  </div>
</nav>  
				<div class="alert alert-success">
					<strong>Source codes for Arduino, ESP8266, ESP32, NewPing Library: </strong><a href="https://github.com/martinius96/hladinomer-studna-scripty/">Github project repository</a>
				</div>	
				<div class="alert alert-success">
					<strong><font color="red">Try Water Level Monitor project for free with your hardware: </strong><a href="http://arduino.clanweb.eu/studna_s_prekladom/?lang=en">HERE</font></a> - HTTP protocol only (Endora.cz freehosting does not support HTTPS connections).
				</div>	
<div class="alert alert-warning">
	<strong><font color="red">Try the project level meter for free with your hardware: </strong><a href="https://hladinomer.000webhostapp.com/">HERE</font></a> - HTTPS (available for ESP8266 and ESP32, Arduino + Ethernet does not support HTTPS)
</div>	
				<div class="alert alert-info">
					<strong>From 4th June 2021 available implementation for ESP32 in framework ESP-IDF v4.2 (4.0 compatible)</strong>
				</div>
				<div class="alert alert-danger">
					<strong>For source codes of web interface or questions, contact author in ENGLISH language at: </strong>martinius96@gmail.com
				</div>
<center><h1>Water level monitor project</h1></center>
<span class="label label-default">Arduino</span>
<span class="label label-primary">Ethernet</span>
<span class="label label-success">Wiznet W5100 / W5500</span>
<span class="label label-info">ESP8266</span>
<span class="label label-warning">ESP32</span>
<span class="label label-danger">Ultrasonic</span>
<span class="label label-default">HC-SR04</span>
<span class="label label-primary">JSN-SR04T</span>
<span class="label label-info">Sigfox</span>				
<hr>
<center> 
	<h2>Supported microcontrollers for Water Level monitor - AVR / ESP</h2>
</center>	
     <hr>				
<div class="row">
	<div class="col-sm-2"><center><img src="https://i.imgur.com/wtnzKqO.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Arduino UNO" title="Control microcontroller Arduino UNO"><br><b><a href="https://www.ebay.com/itm/254532156570">Arduino UNO</a></b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/XHC8DBe.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Arduino Nano" title="Control microcontroller Arduino Nano"><br><b><a href="https://www.ebay.com/itm/252742123829">Arduino Nano</a></b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/fPxr64q.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Arduino Mega 1280/25" title="Control microcontroller Arduino Mega 1280/2560"><br><b><a href="https://www.ebay.com/itm/304122418040">Arduino Mega 1280/2560</a></b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/koSyFuW.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller NodeMCU v2 / v3 Lolin - ESP8266-12E / ESP8266-12F" title="Control microcontroller NodeMCU v2 / v3 Lolin - ESP8266-12E / ESP8266-12F"><br><b><a href="https://www.ebay.com/itm/252718027546">NodeMCU (ESP8266)</a></b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/FV9xi6K.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Wemos D1 Mini - ESP8266-12E / ESP8266-12F" title="Control microcontroller Wemos D1 Mini - ESP8266-12E / ESP8266-12F"><br><b><a href="https://www.ebay.com/itm/254535886946">Wemos D1 / D1 Mini (ESP8266)</a></b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/BczG03b.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller ESP32 Devkit V1 - ESP-WROOM-32 / ESP32-S" title="Control microcontroller ESP32 Devkit V1 - ESP-WROOM-32 / ESP32-S"><br><b><a href="https://www.ebay.com/itm/254953129496">ESP32 DevKit</a></b></center></div>
</div>	
<hr>	
<center> 
	<h2>Transmission technology modules - Ethernet / Sigfox</h2>
</center>
<hr>
<div class="row">
<div class="col-sm-2"><center><img src="https://i.imgur.com/aaS35X2.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet shield Wiznet W5100" title="Ethernet shield Wiznet W5100"><br><b><a href="https://www.ebay.com/itm/185017231005">Ethernet shield Wiznet W5100</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/mz4dhRA.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul Wiznet W5500" title="Ethernet modul Wiznet W5500"><br><b><a href="https://www.ebay.com/itm/263116282333">Ethernet module Wiznet W5500</a></b></center></div>
<div class="col-sm-4"><center><img src="https://i.imgur.com/LhpZGxj.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul Wiznet USR-ES1" title="Ethernet modul Wiznet USR-ES1"><br><b><a href="https://www.ebay.com/itm/202042600986">Ethernet module Wiznet USR-ES1</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/yIZEKct.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul MicroChip ENC28J60" title="Ethernet modul MicroChip ENC28J60"><br><b><a href="https://www.ebay.com/itm/252798986559">Ethernet module ENC28J60</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/r2Q4faF.png" width="128px" height="128px" style="border-radius: 50%;" alt="Sigfox Wisol modem - IoT LPWAN Node 868 MHz" title="Sigfox Wisol modem - IoT LPWAN Node 868 MHz"><br><b><a href="https://www.ebay.com/itm/113194034192">Sigfox WISOL SFM10R1</a></b></center></div>
</div>
<hr>
<center> 
	<h2>Compatible ultrasonic distance sensors</h2>
</center>	
     <hr>				
<div class="row">
<div class="col-sm-2"><center><img src="https://i.imgur.com/t4HDpjA.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - HC-SR04" title="Ultrasonic distance sensor - HC-SR04"><br><b><a href="https://www.ebay.com/itm/183351362390">HC-SR04</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/WXWD0wt.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - HC-SR05" title="Ultrasonic distance sensor - HC-SR05"><br><b><a href="https://www.ebay.com/itm/271666928961">HC-SR05</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/DlWRbhK.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - JSN-SR04T" title="Ultrasonic distance sensor - JSN-SR04T"><br><b><a href="https://www.ebay.com/itm/272576395554">JSN-SR04T</a></b></center></div>		
<div class="col-sm-2"><center><img src="https://i.imgur.com/MuTRnZu.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - HY-SRF05" title="Ultrasonic distance sensor - HY-SRF05"><br><b><a href="https://www.ebay.com/itm/224586332861">HY-SRF05</a></b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/R51S6y5.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - HY-SRF06" title="Ultrasonic distance sensor - HY-SRF06"><br><b>HY-SRF06</b></center></div>
<div class="col-sm-2"><center><img src="https://i.imgur.com/8Dogp3S.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrasonic distance sensor - DYP-ME007" title="Ultrasonic distance sensor - DYP-ME007"><br><b><a href="https://www.ebay.com/itm/152929703900">DYP-ME007</a></b></center></div>
<!---
<div class="col-sm-3"><center><img src="https://i.imgur.com/P4HvyLn.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti URM07 ovládaný cez UART" title="Ultrazvukový senzor vzdialenosti URM07 ovládaný cez UART"><br><b>URM07</b></center></div>	
--->	
</div>										
<hr>
<center> 
	<h2> Water Level monitor - Arduino / ESP8266 / ESP32 </h2> 
</center> 
<hr>
<p style = "text-align: justify;">
Water Level monitor project consists of a central web interface that serves to collect data from sensor nodes and visualize them to the user.
Current data on the water level are represented in the dashboard together with the conversion to the volume of the well, historical data on the water level are also available to the user in tabular or graphical visualization with line graphs.
Web interface is responsive, it can adapt to any screen and device resolution.
Project's web interface uses a backend written in PHP that can process incoming data from the request using the HTTP POST method.
Backend corrects the measured level to the actual one based on the known depth of the well, calculates the volume of water in the well from this parameter and the diameter of the well.
Depth and diameter of the well are entered into the system by the user based on the proportions of his well.
Data is sent to the web server by a microcontroller, which performs measurements every 300 seconds - i. 5 minutes, or in the case of transmission via IoT network Sigfox, data is sent every 11 minutes, as it is limited by the network to transmit a maximum of 140 messages per day.
<b> Water level measurement is performed using ultrasonic sensors </b> - HC-SR04, or its waterproof variant JSN-SR04T, other sensors with Trigger / Echo signals from US-02X, IOE-SR0X, HC-SR0X, HY-SRF0X, DYP-ME007 series can also be used.
</p>
<hr>
<p style = "text-align: justify;">
The principle of measuring ultrasonic sensors is to send a Trigger signal with a length of 10μs (microseconds), which bounces off the water surface and returns to the receiver - Echo.
Time-of-Flight method is used to convert the time between sending and receiving the signal to the differential water level from the sensor.
An important parameter for both ultrasonic sensors is the beam width, in other words the detection characteristic.
The HC-SR04 sensor has a 15 ° detection characteristic. The beam is relatively narrow and the sensor is also suitable for narrower wells and tanks, but it is not waterproof and has a high risk of corrosion (oxidation).
For this reason, it is advisable to place it above the well.
The JSN-SR04T waterproof sensor has a detection characteristic of 45 to 60 °, which does not allow it to be used in narrow wells, as the beam widens with distance and a well with a diameter of several units (6 meters at 4.5 well depth) is required.
Ultrasonic measurement is suitable for measuring the level of drinking, utility and waste water.
The system and ultrasonic sensors are maintenance-free.
Just plug in, upload the software implementation and run.
Ultrasonic sensors can also be used to measure material height in various applications.
In the case of a square well, the diameter of the inscribed circle is entered into the average, which will form the reference value of the water cylinder and the volume of the well.
The maximum measurable level height (level) by the sensors is about 400 to 450 cm (known from the datasheet).
</p>
<div class = "alert alert-info">
 	<strong> Other types of water level sensors that can be integrated (you need to create your own firmware): </strong>
 	<li> Laser (LiDAR) </li>
	<li> Hydrostatic </li>
	<li> Electrostatic (capacitive / inductive) </li>
	<li> Pressure (differential / with compensating atmospheric pressure sensor) </li>
	<li> Optical </li>
	<li> Mechanical (floater) </li>
	<li> Magnetic (Hall) </li>
	<li> Microwave (radar) </li>
	<li> <b>Note:</b> If the water level is recalculated from the bottom on the microcontroller's side, the well depth must be set to 0 cm in the web interface. </li>
</div>
<hr><center><h4>Video demonstration of the web interface - Water Level monitor:</h4></center><hr>
<center><iframe width="75%" height="315" src="https://www.youtube.com/embed/RBksATd0-60" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>
<hr><center><h4>Ultrasonic sensors are suitable for:</h4></center><hr>
<div class="alert alert-success">
<li> Digged wells </li>
<li> Septics and cesspools </li>
<li> Streams and lakes </li>
<li> Plastic rainwater tanks </li>
<li> Silos (measuring bulk filling) </li>
<li> Containers (waste monitoring, fill level) </li>
<li> Boiler rooms (monitoring of wood, pellets, coal, wood chips materials) </li>
<li> Shafts and cellars (flooding - groundwater monitoring) </li>
</div>
<hr><center><h4>Ultrasonic sensors are NOT suitable for:</h4></center><hr>
<div class="alert alert-danger">
<li> Drilled wells (due to detection characteristics - wide beam) </li>
<li> Pipes and tubes (due to detection characteristics - wide beam) </li>
<li> To wells with a tributary (rippled surface attenuates ultrasound, measurement is impossible) </li>
<li> In places with a sudden change in temperature (temperature affects the time of sound propagation, so even the stationary level appears to fluctuate) </li>
<li> Vacuum tanks (measurement is not possible) </li>
</div>
<div class="alert alert-info">
	<strong>Detection characteristics of ultrasonic distance sensors - MATLAB scripts:</strong>
	<li><a href="../MATLAB/HCSR04.m">HC-SR04</a></li>
	<li><a href="../MATLAB/JSN04T.m">JSN-SR04T</a></li>
</div>
<hr><center><h4>Plug n' play firmware - Ultra Low Power</h4></center><hr>
<div class="alert alert-success">
  <strong>Compiled firmware available for immediate upload to the microcontroller!</strong>
</div>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th style="width: 25%">Firmware name</th>
<th style="width: 50%">Firmware function</th>
<th style="width: 12.50%">ESP8266</th>
<th style="width: 12.50%">ESP32</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 25%"><b>Ultra Low Power</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Firmware for ULP applications with low current consumption. The firmware is loaded via the bundled ESPTOOL tool automatically, which is run with a .bat script (in the script it is necessary to change the COM port of your ESP board).
After uploading the firmware and assuming that ESP does not have the SSID and password from the previous project stored, WiFiManager will start, which is used to configure the existing WiFi network.
ESP will start broadcasting an open WiFi network with SSID -> <b> Hladinomer_AP </b> in AP mode. After connecting the client (Windows / Android / iOS) the Captive portal will start on 192.168.4.1 (the client should be redirected automatically).
WiFiManager allows you to select a WiFi network in range in the web interface, set a password.
After successfully connecting ESP to the specified WiFi network and assigning IPv4 from the given range, Captive Portal will be turned off, ESP remains in STA-Station mode.
Subsequently, the sensor node will start transmitting data to the web interface <a href="http://arduino.clanweb.eu/studna_s_prekladom/?lang=en"> Water Level Monitor </a>.
<b> The next time the sensor node is started, Captive Portal and WiFiManager will no longer start, as the WiFi network configuration is permanently preserved. </b>
After datas are sent to server, ESP microcontroller will switch to Deep Sleep mode. It will turn off main processor Xtensa.
ESP8266 is awakened via WAKE timer (jumper between GPIO16 and RST required - check Wiring diagram), ESP32 is awakened via RTC Timer.
</p>
</td>
<td style="width: 12.50%"><a href="https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/martinius96/hladinomer-studna-scripty/tree/master/examples/Hladinomer/HTTP/Firmware/ESP8266_ULP" class="btn btn-success" role="button">ESP8266 firmware</a></td>
<td style="width: 12.50%"><a href="https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/martinius96/hladinomer-studna-scripty/tree/master/examples/Hladinomer/HTTP/Firmware/ESP32_ULP" class="btn btn-danger" role="button">ESP32 firmware</a></td>
</tr>
</tbody>
</table>
	</div>
<hr><center><h3>Principle of level meter operation - Block diagram</h3></center><hr>
<center><img src="https://i.imgur.com/VCobc6h.jpg" style="display: block; max-width: 100%; height: auto;" alt="Level meter for cesspool, septic tank, well, measuring principle - ultrasonic distance sensor" title="Level meter for cesspool, septic tank, well, measuring principle - ultrasonic distance sensor"></center>
<p style = "text-align: justify;">
Web interface uses trigonometry to estimate the measurable maximum depth of a well at a known well diameter (another parameter for calculating well volume).
Interface allows user to calculate to what maximum depth of the well each of the sensors is suitable based on its characteristics.
Project is so easy to use even for laymen who do not know which sensor is more suitable for application in their well.
Microcontroller used also plays an important role in the system.
For the project, it is possible to use the Arduino platform (Uno / Mega) in revision R3 with an identical pinout, which can be connected to an Ethernet shield that communicates via the ICSP interface.
It is also possible to use Ethernet modules and connect them directly to the hardware SPI pins of the microcontroller.
Ethernet modules from Wiznet W5100, W5500, USR-ES1 are supported.
The Ethernet module ENC28J60 is supported by MicroChip.
All Ethernet modules provide HTTP connectivity with the web server.
WiFi microcontrollers from Espressif Systems - ESP8266 and ESP32 are also supported.
Microcontrollers have several operating modes: StandBy, StandBy + OTA with the possibility of remote firmware upload via LAN network and deep sleep mode for ULP applications - Deep Sleep.
In sleep mode for ESP8266 it is necessary to add a physical jumper between GPIO16 (WAKE) and RST - see Wiring Diagram.
ESP microcontrollers also allow the implementation of HTTPS (encrypted) connectivity with the web server.
Both the ESP8266 and ESP32 platforms use the Root CA, which has issued a certificate (Issuer) for the web server domain.
The certificate is embedded in the source code of the microcontrollers in .pem format.
In order for the certificate not to take up space in the RAM memory of the microcontroller, it is inserted into the flash memory of the microcontroller - PROGMEM.
Certificate of the certification authority is valid for 10 to 20 years, so it does not require frequent renewal of the certificate.
Data on the current water level and water volume in the well are available in JSON format from the web interface.
The project can integrate the Level meter project via MQTT into home automation (Hassio, Domoticz, Loxone) to display the water level in its own dashboard, e.g. Grafana.
</p>
<div class = "alert alert-info">
<strong> Program implementations for Arduino, ESP8266, ESP32: </strong> <a href="http://arduino.clanweb.eu/studna_s_prekladom/program.php?lang=en"> Available here </a>
</div>
<hr>
<p style = "text-align: justify;">
For sites where there is no fixed internet coverage, it is also possible to use the LPWAN network Sigfox, which covers most European countries, certain Asian countries and some American countries..
The cell station has the operator SimpleCell, which operates the Sigfox IoT network mainly on Towercom transmitters.
This technology allows you to transmit small volumes of messages up to 12B in size.
In the case of the Level project, a 4B water level value is sent.
For a project extended by a rain gauge, the value 8B value is sent, which is formed by the height of the water level and the increment of precipitation.
As Sigfox allows a maximum of 140 messages to be transmitted per day, the data transmission interval is extended to 11 minutes.
In both cases, the message does not contain the full usable length of the payload.
Payload messages can also be supplemented with various system information, for example: GEO data (longitude / latitude) based on data from the GPS service Sigfox Atlas, RSSI (Received Signal Strength), message number and others.
The communication module that was used for the project is a Sigfox WISOL 868 MHz UART LPWAN modem (in case of USA, Canada you will need to use 915 MHz sensor).
This modem communicates via AT commands via the UART interface, which is software emulated on microcontrollers.
The communication will take over at a speed of 9600 baud / s. The WISOL modem is equipped with an integrated u.FL connector on the PCB module for antenna connection, which significantly reduces coverage even indoors / shaded outdoors.
For successful data transmission, coverage by two, preferably three or more BTS stations is required for successful data transmission. The BTS sends the transmitted information to the Sigfox backend, where it is necessary to make a callback, which will start after receiving the data.
The callback makes an HTTP or HTTPS request to the domain where the web application is running with the POST method and a suitably encoded payload that the web application backend expects.
</p>
<div class="alert alert-info">
<b>Level meter - Callback settings in Sigfox Backend:</b>
<li>Callbacks --> Custom --> New</li>
<li><b>In Custom payload config we write:</b> cislo1::uint:16</li>
<li><b>To URL pattern:</b> http://arduino.clanweb.eu/studna_s_prekladom/data.php (or another URL of your web server where the project will run), the possibility to use HTTPS</li>
<li><b>In the HTTP method, select:</b> POST</li>
<li><b>To the Body (body of the message) we add:</b></li>
<li>hodnota={customData#cislo1}</li>
<li><b>To Content-Type:</b> application/x-www-form-urlencoded</li>
</div>			
<hr>
<center> 
     <h3>Screenshots of Water Level monitor webapp</h3>
     <hr>
	<a href="http://arduino.clanweb.eu/studna_s_prekladom/?lang=en">
	<img src="https://i.imgur.com/5HbKpp1.gif" style="display: block; max-width: 100%; height: auto;" alt="Water Level Monitor webapp with automatic refresh of measurement value" title="Water Level Monitor webapp with automatic refresh of measurement value">
    	<img src="https://i.imgur.com/VMLOkiW.gif" style="display: block; max-width: 100%; height: auto;" alt="WaterWell Level monitor - webapp - main page - Last measured values with automatic refresh - AJAX" title="WaterWell Level monitor - webapp - main page - Last measured values with automatic refresh - AJAX">
    	<img src="https://i.imgur.com/rkFWcWv.png" style="display: block; max-width: 100%; height: auto;" alt="WaterWell Level monitor - webapp - Historical measured datas with timestamp" title="WaterWell Level monitor - webapp - Historical measured datas with timestamp"> 
	<img src="https://i.imgur.com/FqqGV8o.png" style="display: block; max-width: 100%; height: auto;" alt="WaterWell Level monitor - Record, minimal, maximal value per day, week, month" title="WaterWell Level monitor - Record, minimal, maximal value per day, week, month"> 
	<img src="https://i.imgur.com/aTd6o11.png" style="display: block; max-width: 100%; height: auto;" alt="WaterWell Level monitor - graph of water level in time - week / year" title="WaterWell Level monitor - graph of water level in time - week / year"> 
	</a>
		</center>					
 </div>
		</div>
</div>
</body>
</html>
