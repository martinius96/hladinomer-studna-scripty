
<!DOCTYPE html>
<html lang="sk-SK">
<head>
<title>Hladinomer do studne, nádrže - webaplikácia</title>
<meta name="description" content="IoT riešenie pre monitorovanie vody v studni. Dashboard zobrazuje real-time údaje, grafy a podporuje senzory (HC-SR04, JSN-SR04T), Arduino, ESP32, LoRaWAN.">
<meta name="keywords" content=IoT dashboard, meranie hladiny vody, hladinomer pre studne, senzory HC-SR04, JSN-SR04T, monitoring vody, Arduino ESP32 IoT, LoRaWAN hladinomer, NB-IoT meranie vody, online vizualizácia hladiny, historické dáta vody, senzory pre studne">

<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml" />
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>  
	<style>
		table, th, td {
  			border: 1px solid black;
		}
	</style>
</head>
<body>
	<div class="container">
  		<div class="row">
    			<div class="col-sm-12">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li class="active"><a href="index.html">Hladinomer</a></li>
	<li><a href="zapojenie.html">Zapojenie</a></li>   
	<li><a href="QR/index.html">QR skener</a></li>
	<a href="en/index.html"><img src="https://i2.wp.com/facsusa.com/wp-content/uploads/2017/05/Flag-of-England.png?ssl=1" alt="English.png, 2,2kB" title="English" height="32" width="32"></a>
<a href="fr/index.html"><img src="https://i.imgur.com/vX7NaZ7.png" alt="French.png, 2,2kB" title="French" height="32" width="32"></a> 
<a href="de/index.html"><img src="https://i.imgur.com/kY5DFH5.png" alt="German.png, 2,2kB" title="German" height="32" width="32"></a>
<a href="ru/index.html"><img src="https://i.imgur.com/3R5jVrX.png" alt="Russian.png, 2,2kB" title="Russian" height="32" width="32"></a>
<a href="es/index.html"><img src="https://i.imgur.com/cIOW0G7.png" alt="Spanish.png, 2,2kB" title="Spanish" height="32" width="32"></a>
	<a href="https://github.com/martinius96/hladinomer-studna-scripty/tree/master/examples/Hladinomer" class="btn btn-info" role="button">Firmware</a>
<!---<a href="th/zapojenie.html"><img src="https://i.imgur.com/9jqINRw.png" alt="Thai.png, 2,2kB" title="Thai" height="32" width="32"></a>-->
</ul>
  </div>
</nav>  
<div class="alert alert-success">
<strong>Ukážkové zdrojové kódy pre Arduino, ESP8266, ESP32 (Ethernet / WiFi / LoRaWAN): </strong><a href="https://github.com/martinius96/hladinomer-studna-scripty/">Repozitár projektu</a>
</div>	
<div class="alert alert-info">
<strong>IoT dashboard s vašim hardvérom je možné vyskúšať tu: </strong>
<a href="http://arduino.clanweb.eu/studna_s_prekladom/?lang=sk" class="btn btn-danger" role="button">HTTP IoT Dashboard</a>
<a href="https://hladinomer.eu/?lang=sk" class="btn btn-success" role="button">HTTPS IoT Dashboard</a>
</div>	
<div class="alert alert-danger">
	<strong>Pri záujme o zdrojové kódy webaplikácie (.php scripty) kontaktujte autora projektu na: </strong>martinius96@gmail.com
</div>
<center><h2>Meranie výšky hladiny vody v studni ultrazvukovou metódou</h2></center>
<div class="alert alert-success">
	<strong>Podpora QR skenera pre vizualizáciu senzorových dát</strong>
</div>	
<a href="https://martinius96.github.io/hladinomer-studna-scripty/QR/">
<center>
<img src="https://i.imgur.com/peGLcYr.jpg" style="display: block; max-width: 100%; height: auto;" alt="Rozšírená realita - výpis aktuálnych dát z IoT portálu" title="Rozšírená realita - výpis aktuálnych dát z IoT portálu">
</center>
</a>
<hr>
<center> 
	<h2>Riadiaci hardvér - kompatibilné mikrokontroléry AVR / ESP</h2>
</center>	
<hr>				
<div class="row">
	<div class="col-sm-2"><center><img src="https://i.imgur.com/wtnzKqO.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Arduino UNO" title="Riadiaci mikrokontróler Arduino UNO"><br><b>Arduino UNO</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/XHC8DBe.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Arduino Nano" title="Riadiaci mikrokontróler Arduino Nano"><br><b>Arduino Nano</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/fPxr64q.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Arduino Mega 1280/25" title="Riadiaci mikrokontróler Arduino Mega 1280/2560"><br><b>Arduino Mega 1280/2560</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/koSyFuW.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler NodeMCU v2 / v3 Lolin - ESP8266-12E / ESP8266-12F" title="Riadiaci mikrokontróler NodeMCU v2 / v3 Lolin - ESP8266-12E / ESP8266-12F"><br><b>NodeMCU 0.9 / 1.0</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/FV9xi6K.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Wemos D1 Mini - ESP8266-12E / ESP8266-12F" title="Riadiaci mikrokontróler Wemos D1 Mini - ESP8266-12E / ESP8266-12F"><br><b>Wemos D1 Mini</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/BczG03b.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler ESP32 Devkit V1 - ESP-WROOM-32 / ESP32-S" title="Riadiaci mikrokontróler ESP32 Devkit V1 - ESP-WROOM-32 / ESP32-S"><br><b>ESP32 DevKit</b></center></div>
</div>	
<hr>	
<center> 
	<h2>Moduly prenosových technológii - Ethernet</h2>
</center>
<hr>
<div class="row">
	<div class="col-sm-3"><center><img src="https://i.imgur.com/aaS35X2.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet shield Wiznet W5100" title="Ethernet shield Wiznet W5100"><br><b>Ethernet shield Wiznet W5100</b></center></div>
	<div class="col-sm-3"><center><img src="https://i.imgur.com/mz4dhRA.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul Wiznet W5500" title="Ethernet modul Wiznet W5500"><br><b>Ethernet modul Wiznet W5500</b></center></div>
	<div class="col-sm-3"><center><img src="https://i.imgur.com/ppyXzMM.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul LAN 8720 PHY Ethernet" title="Ethernet modul LAN 8720 PHY Ethernet"><br><b>Ethernet modul PHY LAN8720</b></center></div>
	<div class="col-sm-3"><center><img src="https://i.imgur.com/yIZEKct.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ethernet modul MicroChip ENC28J60" title="Ethernet modul MicroChip ENC28J60"><br><b>Ethernet modul ENC28J60</b></center></div>
</div>
<hr>
<center> 
	<h2>Kompatibilné ultrazvukové senzory vzdialenosti</h2>
</center>	
<hr>				
<div class="row">
	<div class="col-sm-2"><center><img src="https://i.imgur.com/t4HDpjA.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti HC-SR04" title="Ultrazvukový senzor vzdialenosti HC-SR04"><br><b>HC-SR04</b></center></div>	
	<div class="col-sm-2"><center><img src="https://i.imgur.com/MuTRnZu.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti HY-SRF05" title="Ultrazvukový senzor vzdialenosti HY-SRF05"><br><b>HY-SRF05</b></center></div>
	<div class="col-sm-4"><center><img src="https://i.imgur.com/I7O3IGQ.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový vodotesný senzor vzdialenosti JSN-SR04T" title="Ultrazvukový vodotesný senzor vzdialenosti JSN-SR04T"><br><b>JSN-SR04T</b></center></div>	
	<div class="col-sm-2"><center><img src="https://i.imgur.com/mKqoqgT.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti Parallax PING)))™" title="Ultrazvukový senzor vzdialenosti Parallax PING)))™"><br><b>Parallax PING)))™</b></center></div>
	<div class="col-sm-2"><center><img src="https://i.imgur.com/8Dogp3S.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti DYP-ME007" title="Ultrazvukový senzor vzdialenosti DYP-ME007"><br><b>DYP-ME007</b></center></div>
<!---
<div class="col-sm-3"><center><img src="https://i.imgur.com/P4HvyLn.png" width="128px" height="128px" style="border-radius: 50%;" alt="Ultrazvukový senzor vzdialenosti URM07 ovládaný cez UART" title="Ultrazvukový senzor vzdialenosti URM07 ovládaný cez UART"><br><b>URM07</b></center></div>	
--->	
</div>	
<hr><center><h1>Hladinomer - monitor výšky hladiny vody v studni</h1></center><hr>
<p style="text-align: justify;">  
    <strong>IoT Dashboard Watmonitor</strong> je moderné riešenie na <strong>monitorovanie hladiny vody v kopaných studniach</strong>.  
    Táto <strong>webová aplikácia</strong> ponúka prehľadné rozhranie na <strong>vizualizáciu údajov o výške hladiny vody</strong>.  
    Využíva presné <strong>ultrazvukové senzory</strong>, ako napríklad <strong>HC-SR04</strong> a vodotesnú verziu <strong>JSN-SR04T</strong>,  
    a umožňuje integráciu ďalších senzorov, ako sú <strong>RCW, US-XXX, IOE-SR0X, SR0X, HY-SRF0X, DYP-MEXXX</strong>  
    alebo <strong>Parallax PING)))™</strong>, podľa potreby.  
</p>  

<p style="text-align: justify;">  
    Každých 5 minút vykonáva senzorový uzol 10 priemerovaných meraní, pričom namerané hodnoty sú odosielané na server prostredníctvom  
    <strong>WiFi, Ethernet, LoRaWAN alebo NB-IoT</strong>. Tieto údaje sú okamžite spracované a prezentované v <strong>IoT dashboarde</strong>,  
    ktorý zobrazuje aktuálnu výšku hladiny, prepočítaný objem studne a trendy zmien.  
</p>  

<p style="text-align: justify;">  
    Používatelia môžu sledovať nielen aktuálne dáta, ale aj <strong>historické merania</strong>, zobrazené v prehľadných tabuľkách  
    alebo <strong>grafickej vizualizácii</strong> pomocou čiarových grafov. Rozhranie je plne <strong>responzívne</strong>, čo znamená, že sa bez problémov  
    prispôsobí <strong>smartfónom, tabletom, počítačom aj Smart TV</strong>.  
</p>  

<p style="text-align: justify;">  
    Backend systému vykonáva korekciu nameraných údajov na základe známej hĺbky studne a priemeru, čím zabezpečuje presný výpočet  
    objemu studne v litroch. <strong>Watmonitor</strong> je ideálny nástroj pre všetkých, ktorí potrebujú <strong>spoľahlivé a real-time monitorovanie  
    hladiny vody v studniach</strong> s možnosťou využitia pokročilých <strong>IoT technológií</strong>.  
</p>

<a href="http://arduino.clanweb.eu/studna_s_prekladom/">
<center>
	<img src="https://i.imgur.com/Cfygvzn.png" style="display: block; max-width: 100%; height: auto;" alt="Hladinomer - dashboard - automatická obnova aktuálne nameraných dát cez jQuery" title="Hladinomer - dashboard - automatická obnova aktuálne nameraných dát cez jQuery">
</center>
</a>
<p style="text-align: justify;">  
    Princíp merania <strong>ultrazvukových senzorov</strong> spočíva vo vyslaní signálu <strong>Trigger</strong> s dĺžkou 10 μs (mikrosekúnd),  
    ktorý sa od hladiny vody odrazí a vráti do prijímača – <strong>Echo</strong>. Táto metóda, známa ako <strong>Time-of-Flight</strong>,  
    počíta čas medzi vyslaním a prijatím signálu na určenie vzdialenosti hladiny vody od senzora, umiestneného na vrchu studne.  
    Vzorec prepočtu používa <strong>rýchlosť zvuku</strong> 343 m/s pri teplote 20 °C.  
</p>  

<p style="text-align: justify;">  
    Dôležitým parametrom ultrazvukových senzorov je <strong>šírka lúča</strong>, známa aj ako detekčná charakteristika.  
    Senzor <strong>HC-SR04</strong> má 15° detekčnú charakteristiku, čo znamená, že lúč je relatívne úzky. Tento senzor je vhodný  
    pre užšie studne a nádrže, no nie je vodotesný a má vysoké riziko korózie vo vlhkých podmienkach. Preto je ideálne ho umiestniť  
    nad studňu, aby sa minimalizovali účinky vlhkosti.  
</p>  

<p style="text-align: justify;">  
    Vodotesný senzor <strong>JSN-SR04T</strong> má širšiu detekčnú charakteristiku 60°, čo obmedzuje jeho použitie v úzkych studniach.  
    Lúč sa so vzdialenosťou veľmi rozširuje, a preto je vhodný iba pre širšie studne s priemerom aspoň 6 metrov (pri hĺbke 4,5 metra),  
    aby sa predišlo odrazom signálu. Elektronická doska tohto senzora nie je odolná voči vode, a preto musí byť chránená pred vlhkosťou.  
</p>  

<p style="text-align: justify;">  
    <strong>Ultrazvukové senzory</strong> sú však plne bezúdržbové a poskytujú spoľahlivé meranie. Maximálna merateľná výška hladiny  
    týmito senzormi je približne 400 až 450 cm, podľa údajov uvedených v katalógových listoch (datasheetoch).  
</p>

<div class="alert alert-info">
  	<strong>Iné typy senzorov pre záznam výšky hladiny vody, ktoré je možné integrovať (nutné vytvoriť si vlastný firmvér):</strong> 
 	<li><b>Laserové (LiDAR)</b> - (DFRobot DTOF LD19 LIDAR, DFRobot ToF Laser ...)</li>
	<li><b>Hydrostatické (ponorné)</b> - (LMK307, DPT200, PT20eco, HDL300 ...)</li>
	<li><b>Elektrostatické (kapacitné / indukčné)</b> - XKC-Y25-NPN</li>
	<li><b>Tlakové (diferenčné / s kompenzačným senzorom atmosférického tlaku)</b></li>
	<li><b>Optické</b> - (GP2Y0A02YK0F, YD-02F, FS-IR02 ...)</li>
	<li><b>Mechanické (plavák)</b></li>
	<li><b>Magnetické (Hall)</b> - (VCL9, Sen-Hz41wa ...)</li>
	<li><b>Mikrovlnné (radarové)</b> - (CS476, CS475A-L, SP69, WLR 8/15/30 ...)</li>
	<li><b>Ultrazvukové</b> - (A01NYUB, URM37), alebo iné, možnosť aj priemyselnej zbernice pre výstup (RS-485, prúdová slučka 4-20 mA, Modbus RTU, M-bus, PROFINET)</li>
	<li><b>Poznámka:</b> Ak sa vykonáva prepočet výšky hladiny vody od dna na strane mikrokontroléra, je nutné na webovom rozhraní nastaviť hĺbku studne na 0 cm.</li>
</div>
<hr><center><h3>Video demonštrácia webového rozhrania - Hladinomer:</h3></center><hr>
                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
          width="560" height="315" src="https://www.youtube.com/embed/Fy5IAj-ygrk?si=KRuF9B88cb8ni_kU" 
          frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
  </iframe>
</div>
<hr><center><h4>Ultrazvukové senzory sú vhodné do:</h4></center><hr>
<div class="alert alert-success">
<li>Kopaných studní</li>
<li>Septikov a žúmp</li>
<li>Potokov a jazier</li>
<li>Plastových nádrží na dažďovú vodu</li>
<li>Silá (meranie naplnenia sypkými materiálmi)</li>
<li>Kontajnery (monitoring odpadu, naplnenia zbernej nádoby)</li>
<li>Kotolne (monitoring zásoby dreva, peliet, uhlia, štiepky)</li>
<li>Šachty a pivnice (monitoring vytopenia - výšky spodnej vody)</li>
</div>
<hr><center><h3>Ultrazvukové senzory nie sú vhodné do:</h3></center><hr>
<div class="alert alert-danger">
<li>Vŕtaných studní (z dôvodu detekčnej charakteristiky - široký lúč)</li>
<li>Potrubí a rúr (z dôvodu detekčnej charakteristiky - široký lúč)</li>
<li>Do studní so spádovým prítokom (rozbúrená hladina utlmí ultrazvuk, meranie je nemožné / skokovité)</li>
<li>Do miest s náhlou zmenou teplôt (teplota ovplyvňuje čas šírenia zvuku, teda aj stacionárna hladina sa javí ako kolísavá)</li>
<li>Vákuových nádrží (meranie je nemožné, zvuk sa nešíri)</li>
</div>
<div class="alert alert-info">
	<strong>Detekčná charakteristika ultrazvukových senzorov vzdialenosti - MATLAB scripty pre vizualizáciu:</strong>
	<li><a href="MATLAB/HCSR04.m" class="btn btn-success" role="button">HC-SR04.m stiahnuť</a></li>
	<li><a href="MATLAB/JSN04T.m" class="btn btn-primary" role="button">JSN-SR04T.m stiahnuť</a></li>
</div>
<hr><center><h4>Plug n' play firmware - Ultra Low Power / StandBy</h4></center><hr>
<div class="alert alert-success">
  <strong>Skompilovaný firmvér dostupný pre okamžité nahratie do mikrokontroléra (nevyžaduje inštaláciu knižníc).</strong>
</div>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th style="width: 25%">Názov firmvéru</th>
<th style="width: 50%">Funkcia firmvéru</th>
<th style="width: 12.50%">ESP8266</th>
<th style="width: 12.50%">ESP32</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 25%"><b>Ultra Low Power</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Firmvér pre ULP aplikácie s nízkym prúdovým odberom (viz. schéma zapojenia). Firmvér sa nahráva cez pribalený nástroj ESPTOOL automatizovane, ktorý je spustený s .bat scriptom (v scripte nutné zmeniť COM port vašej ESP dosky). 
Po nahratí firmvéru a za predpokladu, že ESP nemá uložené SSID a heslo z predchádzajúceho projektu, spustí sa WiFiManager, ktorý slúži pre konfiguráciu existujúcej WiFi siete.
ESP začne vysielať v režime AP otvorenú WiFi sieť s SSID --> <b>Hladinomer_AP</b>. Po pripojení klienta (Windows / Android / iOS) sa spustí Captive portál na 192.168.4.1 (klient by mal byť presmerovaný automaticky). 
WiFiManager umožní vo web rozhraní vybrať WiFi sieť v dosahu, nastaviť heslo. 
Po úspešnom pripojení ESP na zadanú WiFi sieť a pridelení IPv4 z daného rozsahu sa Captive Portal vypne, ESP zostáva v móde STA - Station.
Následne senzorový uzol začne prenášať dáta do web rozhrania <a href="http://arduino.clanweb.eu/studna_s_prekladom/">Hladinomera</a>.
<b>Pri následnom spustení senzorového uzla sa už Captive Portal a WiFiManager nespustí, nakoľko je konfigurácia WiFi siete permanetne uchovaná.</b>
Mikrokontróler po odoslaní dát prechádza do režimu hlbokého spánku - Deep Sleep. V režime spánku je vypnutý hlavný procesor Xtensa. 
ESP8266 je prebudené cez WAKE timer (vyžaduje sa prepojka medzi GPIO16 a RST), ESP32 cez RTC Timer.
</p>
</td>
<td style="width: 12.50%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fexamples%2FHladinomer%2FHTTP%2FFirmware%2FESP8266_ULP" class="btn btn-success" role="button">ESP8266 firmvér</a></td>
<td style="width: 12.50%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fexamples%2FHladinomer%2FHTTP%2FFirmware%2FESP32_ULP" class="btn btn-danger" role="button">ESP32 firmvér</a></td>
</tr>
<tr>
<td style="width: 25%"><b>StandBy</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Firmvér pre StandBy režim mikrokontroléra, ktorý odosiela v pravidelných intervaloch (5 min) meranie o výšky hladiny vody na webserver a zároveň udržuje konektivitu s AP v LAN sieti. 
Firmvér sa nahráva cez pribalený nástroj ESPTOOL automatizovane, ktorý je spustený s .bat scriptom (v scripte nutné zmeniť COM port vašej ESP dosky). 
Po nahratí firmvéru a za predpokladu, že ESP nemá uložené SSID a heslo z predchádzajúceho projektu, spustí sa WiFiManager, ktorý slúži pre konfiguráciu existujúcej WiFi siete.
ESP začne vysielať v režime AP otvorenú WiFi sieť s SSID --> <b>Hladinomer_AP</b>. Po pripojení klienta (Windows / Android / iOS) sa spustí Captive portál na 192.168.4.1 (klient by mal byť presmerovaný automaticky). 
WiFiManager umožní vo web rozhraní vybrať WiFi sieť v dosahu, nastaviť heslo. 
Po úspešnom pripojení ESP na zadanú WiFi sieť a pridelení IPv4 z daného rozsahu sa Captive Portal vypne, ESP zostáva v móde STA - Station.
Následne senzorový uzol začne prenášať dáta do web rozhrania <a href="http://arduino.clanweb.eu/studna_s_prekladom/">Hladinomera</a>.
<b>Pri následnom spustení senzorového uzla sa už Captive Portal a WiFiManager nespustí, nakoľko je konfigurácia WiFi siete permanetne uchovaná.</b>
</p>
</td>
<td style="width: 12.50%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fexamples%2FHladinomer%2FHTTP%2FFirmware%2FESP8266_StandBy" class="btn btn-success" role="button">ESP8266 firmvér</a></td>
<td style="width: 12.50%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fexamples%2FHladinomer%2FHTTP%2FFirmware%2FESP32_StandBy" class="btn btn-danger" role="button">ESP32 firmvér</a></td>
</tr>
</tbody>
</table>
	</div>
<hr><center><h3>Princíp fungovania hladinomera - Bloková schéma</h3></center><hr>
<center><img src="https://i.imgur.com/VCobc6h.jpg" style="display: block; max-width: 100%; height: auto;" alt="Hladinomer do žumpy, septiku, studne, princíp merania - ultrazvukový senzor vzdialenosti" title="Hladinomer do žumpy, septiku, studne, princíp merania - ultrazvukový senzor vzdialenosti"></center>
<p style="text-align: justify;">
Webové rozhranie (IoT dashboard) využíva trigonometriu pre odhad merateľnej maximálnej hĺbky studne pri známom priemere studne (ďalší parameter pre výpočet objemu studne). 
Používateľovi vie tak webové rozhranie dopočítať, do akej maximálnej hĺbky studne je každý zo senzorov vhodný na základe jeho charakteristiky. 
Projekt je tak jednoduchý na použitie aj pre laikov, ktorí nevedia, ktorý senzor je pre aplikáciu v ich studni vhodnejší.
Dôležitú úlohu v systéme zohráva aj použitý mikrokontróler. 
Pre projekt je možné využiť platformu Arduino (Uno / Mega) v revízii R3 s identickým pinoutom, ktorú je možné spojiť s Ethernet shieldom, ktorý komunikuje cez ICSP rozhranie. 
Taktiež je možné využiť aj Ethernet moduly a pripojiť ich priamo na hardvérové SPI piny mikrokontroléra.
Podporované sú Ethernet moduly od výrobcu Wiznet W5100, W5500, USR-ES1. 
Od výrobcu MicroChip je podporovaný Ethernet modul ENC28J60.
Všetky Ethernet moduly zabezpečujú HTTP konektivitu s webserverom.
Podporované sú aj WiFi mikrokontroléry od Espressif Systems - ESP8266 a ESP32.
Mikrokontroléry majú viacero prevádzkových režimov: StandBy, StandBy + OTA s možnosťou vzdialeného uploadu firmvéru cez LAN sieť a režim hlbokého spánku pre ULP aplikácie - Deep Sleep.
V režime spánku pre mikrokontróler ESP8266 je nutné pridať fyzickú prepojku medzi GPIO16 (WAKE) a RST - pozri Schému zapojenia.
Mikrokontroléry ESP umožňujú implementovať aj šifrovanú komunikáciu s webserverom cez HTTPS protokol. ESP32 je možné použiť aj s PHY Ethernet modulom LAN8720, podporuje HTTP i HTTPS spojenie. 
Platforma ESP8266 i ESP32 využíva certifikát koreňovej certifikačnej autority (Root CA), ktorá pre doménu webservera vydala certifikát (Issuer). 
Certifikát je vložený do zdrojového kódu mikrokontrolérov v .pem formáte.
Aby certifikát nezaberal miesto v RAM pamäti mikrokontroléra, je vložený do flash pamäte mikrokontroléra - PROGMEM. 
Certifikát certifikačnej autority platí v rozmedzí 10 až 20 rokov, nevyžaduje tak častý renew certifikátu.
Dáta o aktuálnej výške hladiny vody a objeme vody v studni sú z webového rozhrania dostupné v JSON formáte.
Projekt Hladinomer (Watmonitor) je možné integrovať cez MQTT do domácej automatizácie (Hassio, Domoticz, Loxone) pre zobrazenie výšky hladiny vody vo vlastnom dashboarde napr. Grafana.
Následne je možné v podsystéme vykonávať aj ovládanie periférii (zavlažovanie, polievanie, aktivácia domácej vodárne) na základe dát o výške hladiny vody v studni z web rozhrania.
</p>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th>Operačný mód</th>
<th>StandBy</th>
<th>StandBy + Over The Air (OTA)</th>
<th>Ultra Low Power (ULP)</th>
<th>FreeRTOS</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Mikrokontróler</strong></td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Arduino + Ethernet</td>
<td>✓</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>ESP8266</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>×</td>
</tr>
<tr>
<td>ESP32</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
</tbody>
</table>				
</div>
<div class="alert alert-info">
	<strong>Programové implementácie pre Arduino, ESP8266, ESP32 (vyžadujú doinštalovanie knižníc): </strong><a href="http://arduino.clanweb.eu/studna_s_prekladom/program.php">Dostupné tu</a>
</div>	
<hr><center><h4>Dostupné knižnice pre mikrokontroléry (Arduino / ESP)</h4></center><hr>
<div class="alert alert-danger" style="word-wrap:break-word;">
	Archív knižnice (.zip) rozbaliť do <strong>C:/Používatelia/[Používateľ]/Dokumenty/Arduino/libraries</strong>
</div>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th style="width: 25%">Názov knižnice</th>
<th style="width: 50%">Funkcia knižnice</th>
<th style="width: 25%">Stiahnuť</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 25%"><b>NewPing</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Knižnica pre AVR mikrokontroléry (ATmega) Arduino Uno / Nano / Mega. 
Umožňuje vykonávať meranie ultrazvukovými senzormi vzdialenosti RCW, US-XXX, IOE-SR0X, SR0X, HC-SR0X, HY-SRF0X, DYP-MEXXX, Parallax PING)))™. 
</p>
</td>
<td style="width: 25%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fsrc%2FNewPing" class="btn btn-success" role="button">Stiahnuť</a></td>
</tr>
<tr>
<td style="width: 25%"><b>NewPingESP8266</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Knižnica pre ESP8266 a ESP32 mikrokontroléry. 
Umožňuje vykonávať meranie ultrazvukovými senzormi vzdialenosti RCW, US-XXX, IOE-SR0X, SR0X, HC-SR0X, HY-SRF0X, DYP-MEXXX, Parallax PING)))™. 
</p>
</td>
<td style="width: 25%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fsrc%2FNewPingESP8266" class="btn btn-success" role="button">Stiahnuť</a></td>
</tr>
<tr>
<td style="width: 25%"><b>Ethernet2</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Knižnica pre AVR mikrokontroléry (ATmega) Arduino Uno / Nano / Mega. 
Umožňuje komunikáciu s Ethernet modulom Wiznet W5200 až W5500 cez SPI rozhranie. 
</p>
</td>
<td style="width: 25%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fsrc%2FEthernet2" class="btn btn-success" role="button">Stiahnuť</a></td>
</tr>
<tr>
<td style="width: 25%"><b>Ethernet3</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Knižnica pre AVR mikrokontroléry (ATmega) Arduino Uno / Nano / Mega. 
Umožňuje komunikáciu s Ethernet modulom Wiznet W5500 V2 - USR-ES1 cez SPI rozhranie. 
</p>
</td>
<td style="width: 25%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fsrc%2FEthernet3" class="btn btn-success" role="button">Stiahnuť</a></td>
</tr>
<tr>
<td style="width: 25%"><b>UIPEthernet</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Knižnica pre AVR mikrokontroléry (ATmega) Arduino Uno / Nano / Mega. 
Umožňuje komunikáciu s Ethernet modulom ENC28J60 od Microchipu cez SPI rozhranie. 
</p>
</td>
<td style="width: 25%"><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2Fhladinomer-studna-scripty%2Ftree%2Fmaster%2Fsrc%2FUIPEthernet" class="btn btn-success" role="button">Stiahnuť</a></td>
</tr>
</tbody>
</table>
	</div>				
<hr>
<center> 
     <h3>Screenshoty webového rozhrania pre projekt Hladinomer</h3>
     <hr>
<a href="http://arduino.clanweb.eu/studna_s_prekladom/">
    	<img src="https://i.imgur.com/3fnNJ8f.png" style="display: block; max-width: 100%; height: auto;" alt="Hlavný prehľad - Hladinomer - výška hladiny vody v studni" title="Hlavný prehľad - Hladinomer - výška hladiny vody v studni">
    	<img src="https://your-iot.github.io/Watmonitor/assets/img/gallery/gallery-2.JPG" style="display: block; max-width: 100%; height: auto;" alt="Historický prehľad nameraných údajov s časovou značkou - Hladiomer" title="Historický prehľad nameraných údajov s časovou značkou - Hladiomer"> 
	<img src="https://your-iot.github.io/Watmonitor/assets/img/gallery/gallery-4.JPG" style="display: block; max-width: 100%; height: auto;" alt="Grafická vizualizácia výšky hladiny vody za deň, 7 dní, 30 dní, rok - Hladinomer" title="Grafická vizualizácia výšky hladiny vody za deň, 7 dní, 30 dní, rok - Hladinomer">     
	<img src="https://your-iot.github.io/Watmonitor/assets/img/gallery/gallery-3.JPG" style="display: block; max-width: 100%; height: auto;" alt="Maximálne a minimálne hodnoty výšky hladiny vody v studni za 24 hodín, 7 dní, 30 dní" title="Maximálne a minimálne hodnoty výšky hladiny vody v studni za 24 hodín, 7 dní, 30 dní"> 	
<img src="https://i.imgur.com/xyhyH8A.png" style="display: block; max-width: 100%; height: auto;" alt="ESP32 - FreeRTOS - ESP-IDF - meranie a prenos dát na webserver cez HTTPS, POST metóda prenosu" title="ESP32 - FreeRTOS - ESP-IDF - meranie a prenos dát na webserver cez HTTPS, POST metóda prenosu"> 
<hr><center><h4>Kompatibilný hardvér pre projekt hladinomer</h4></center><hr>		
<a href="http://arduino.clanweb.eu/studna_s_prekladom/">
<img src="https://i.imgur.com/KFZANfa.jpg" style="display: block; max-width: 100%; height: auto;" alt="Podporovaný hardvér pre projekt Hladinomer - Arduino - Ethernet - WiFi - ESP8266 - ESP32" title="Podporovaný hardvér pre projekt Hladinomer - Arduino - Ethernet - WiFi - ESP8266 - ESP32"> 
<img src="https://i.imgur.com/xLaYlmK.jpg" style="display: block; max-width: 100%; height: auto;" alt="Senzorový uzol ESP32 s PHY Ethernet modulom LAN7820 a ultrazvukovým senzorom JSN-SR04T" title="Senzorový uzol ESP32 s PHY Ethernet modulom LAN7820 a ultrazvukovým senzorom JSN-SR04T"> 
<img src="https://i.imgur.com/du39Nwp.jpg" style="display: block; max-width: 100%; height: auto;" alt="Ultrazvukové senzory s možnosťou solárneho napájania, podpora LoRaWAN, WiFi" title="Ultrazvukové senzory s možnosťou solárneho napájania, podpora LoRaWAN, WiFi"> 	
<img src="https://i.imgur.com/wSRR2Y5.jpg" style="display: block; max-width: 100%; height: auto;" alt="QR code scanner - AR for ultrasonic sensor" title="QR code scanner - AR for ultrasonic sensor"> 	
</a>
</center>  
            <hr> 
	
 </div>
		</div>
</div>
</body>
</html>
