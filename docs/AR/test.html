<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div id="result"></div>

    <script>
        fetch('/.netlify/functions/netlify-function')
            .then(response => response.json())
            .then(data => {
                // Process the data from the serverless function
                console.log(data);
                document.getElementById('result').textContent = JSON.stringify(data);
            })
            .catch(error => {
                console.error(error);
            });
    </script>

    <script>
        // Netlify Function code here
        async function fetchData() {
            try {
                const apiUrl = 'https://arduino.clanweb.eu/studna_s_prekladom/json_output.php';
                const response = await fetch(apiUrl);
                const data = await response.json();
                return data;
            } catch (error) {
                return { error: 'Failed to fetch data' };
            }
        }

        const handler = async (event, context) => {
            const data = await fetchData();
            return {
                statusCode: 200,
                body: JSON.stringify(data),
            };
        };
    </script>
</body>
</html>
