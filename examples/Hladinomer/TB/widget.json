{
  "fqn": "hladinomer_widget",
  "name": "Hladinomer_WIDGET",
  "deprecated": false,
  "image": null,
  "description": null,
  "descriptor": {
    "type": "latest",
    "sizeX": 7.5,
    "sizeY": 3,
    "resources": [],
    "templateHtml": "<div class=\"p-4 text-center\">\r\n  <h2 class=\"text-xl font-bold mb-2\">{{name}}</h2>\r\n  <p class=\"text-3xl font-semibold text-blue-600\">{{value}} cm</p>\r\n  <p class=\"text-lg\">{{volume}} litrov</p>\r\n  <p class=\"text-sm text-gray-500\">ÄŒas merania: {{time}}</p>\r\n</div>",
    "templateCss": "#container {\r\n  overflow: visible !important;\r\n  height: 100% !important;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.tb-container {\r\n  overflow: visible !important;\r\n  height: auto !important;\r\n  max-height: none !important;\r\n}\r\n.p-4 {\r\n  padding: 20px;\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n}\r\n\r\n.text-xl {\r\n  font-size: 1.4rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.text-3xl {\r\n  font-size: 2rem;\r\n  font-weight: 700;\r\n  margin: 8px 0;\r\n}\r\n\r\n.text-lg {\r\n  font-size: 1.1rem;\r\n  margin: 4px 0;\r\n}\r\n\r\n.text-sm {\r\n  font-size: 0.9rem;\r\n  color: #777;\r\n}\r\n\r\n.text-blue-600 {\r\n  color: #007bff;\r\n}\r\n\r\n",
    "controllerScript": "self.onInit = function() {\r\n    loadData();\r\n    self.interval = setInterval(loadData, 300000); // 5 min\r\n};\r\n\r\nself.onDestroy = function() {\r\n    if (self.interval) {\r\n        clearInterval(self.interval);\r\n    }\r\n};\r\n\r\nfunction loadData() {\r\n    var url = \"https://corsproxy.io/?https%3A%2F%2Fhladinomer.eu%2Fjson_output.php\";\r\n    fetch(url)\r\n        .then(r => r.json())\r\n        .then(data => {\r\n            self.ctx.$scope.name = data.name;\r\n            self.ctx.$scope.value = data.value;\r\n            self.ctx.$scope.volume = data.volume;\r\n            self.ctx.$scope.time = data.time;\r\n            self.ctx.detectChanges();\r\n        })\r\n        .catch(err => console.error(\"Fetch error:\", err));\r\n}\r\n",
    "settingsForm": [],
    "dataKeySettingsForm": [],
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Hladinomer_WIDGET\",\"decimals\":null}"
  },
  "resources": [],
  "scada": false,
  "tags": null
}